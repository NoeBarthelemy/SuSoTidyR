
<!-- README.md is generated from README.Rmd. Please edit that file -->

# SuSoTidyR

<!-- badges: start -->
<!-- badges: end -->

**(ENG) SuSoTidyR** is an R package designed to facilitate the import,
cleaning, and transformation of data exported from Survey Solutions.
This package helps structure the data in a **tidy** format, making it
easier to analyze and work with. It also includes functions to handle
unwanted variables generated by configuration errors, such as missing
response limits in list-type questions.

**(FR) SuSoTidyR** est un package R conçu pour faciliter l’importation,
le nettoyage et la transformation des données exportées depuis Survey
Solutions. Ce package aide à structurer les données dans un format
**tidy**, rendant leur analyse et manipulation plus simples. Il inclut
également des fonctions pour gérer les variables inutiles générées par
des erreurs de configuration, comme l’absence de limite de réponses dans
les questions de type liste.

## Main Features (ENG)

- **import_metadata**: Imports metadata and variable labels from Survey
  Solutions `.do` files.

- **import_results**: Imports main survey results along with associated
  files, such as rosters, assignments, and interviews.

- **clean_lists**: Removes unwanted columns containing only specific
  missing values (e.g., `-999999999`, `##N/A##`).

- **replace_na_values**: Replaces specific missing values with `NA` to
  standardize missing data.

- **values_to_labels**: Replaces coded values with their corresponding
  labels for easier interpretation.

## Fonctionnalités principales (FR)

- **import_metadata** : Importe les métadonnées et les labels des
  variables depuis les fichiers `.do` de Survey Solutions.

- **import_results** : Importe les résultats d’enquête principaux ainsi
  que les fichiers associés, comme les rosters, les assignments et les
  interviews.

- **clean_lists** : Supprime les colonnes inutiles contenant uniquement
  des valeurs manquantes spécifiques (e.g., `-999999999`, `##N/A##`).

- **replace_na_values** : Remplace les valeurs spécifiques de données
  manquantes par des `NA` pour uniformiser les données.

- **values_to_labels** : Remplace les valeurs codées par leurs labels
  pour les rendre plus interprétables.

## Installation

Install the package directly from GitHub using the `remotes` package:

Installez le package directement depuis GitHub avec le package `remotes`
:

``` r
# If remotes is not installed / Si remotes n'est pas installé
install.packages("remotes")
#> Installation du package dans 'C:/Users/noe.barthelemy/AppData/Local/Temp/Rtmp6rVoZY/temp_libpathf94713d28c8'
#> (car 'lib' n'est pas spécifié)
#> le package 'remotes' a été décompressé et les sommes MD5 ont été vérifiées avec succés
#> 
#> Les packages binaires téléchargés sont dans
#>  C:\Users\noe.barthelemy\AppData\Local\Temp\RtmpcTUfEj\downloaded_packages

# Install SuSoTidyR from GitHub / Installer SuSoTidyR depuis GitHub
remotes::install_github("noebarthelemy/SuSoTidyR")
#> Downloading GitHub repo noebarthelemy/SuSoTidyR@HEAD
#> glue (1.7.0 -> 1.8.0) [CRAN]
#> Installing 1 packages: glue
#> Installation du package dans 'C:/Users/noe.barthelemy/AppData/Local/Temp/Rtmp6rVoZY/temp_libpathf94713d28c8'
#> (car 'lib' n'est pas spécifié)
#> le package 'glue' a été décompressé et les sommes MD5 ont été vérifiées avec succés
#> 
#> Les packages binaires téléchargés sont dans
#>  C:\Users\noe.barthelemy\AppData\Local\Temp\RtmpcTUfEj\downloaded_packages
#> ── R CMD build ─────────────────────────────────────────────────────────────────
#>          checking for file 'C:\Users\noe.barthelemy\AppData\Local\Temp\RtmpcTUfEj\remotes153862ff2a34\NoeBarthelemy-SuSoTidyR-ccf71a9/DESCRIPTION' ...     checking for file 'C:\Users\noe.barthelemy\AppData\Local\Temp\RtmpcTUfEj\remotes153862ff2a34\NoeBarthelemy-SuSoTidyR-ccf71a9/DESCRIPTION' ...   ✔  checking for file 'C:\Users\noe.barthelemy\AppData\Local\Temp\RtmpcTUfEj\remotes153862ff2a34\NoeBarthelemy-SuSoTidyR-ccf71a9/DESCRIPTION' (503ms)
#>       ─  preparing 'SuSoTidyR': (982ms)
#>      checking DESCRIPTION meta-information ...     checking DESCRIPTION meta-information ...   ✔  checking DESCRIPTION meta-information
#>       ─  checking for LF line-endings in source and make files and shell scripts (544ms)
#>       ─  checking for empty or unneeded directories
#>       ─  building 'SuSoTidyR_0.0.0.9000.tar.gz'
#>      
#> 
#> Installation du package dans 'C:/Users/noe.barthelemy/AppData/Local/Temp/Rtmp6rVoZY/temp_libpathf94713d28c8'
#> (car 'lib' n'est pas spécifié)
```

## Usage / Utilisation

Here is an example workflow with **SuSoTidyR** to import, clean, and
organize data from a Survey Solutions survey.

Voici un exemple de flux de travail avec **SuSoTidyR** pour importer,
nettoyer et organiser les données d’une enquête Survey Solutions.

### 1. Import Metadata / Importer les Métadonnées

Use `import_metadata` to load Survey Solutions metadata from a folder
containing `.do` files.

Utilisez `import_metadata` pour charger les métadonnées de *Survey
Solutions* depuis un dossier contenant des fichiers `.do`.  

``` r
library(SuSoTidyR)
library(tidyverse)
#> ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
#> ✔ dplyr     1.1.4     ✔ readr     2.1.5
#> ✔ forcats   1.0.0     ✔ stringr   1.5.1
#> ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
#> ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
#> ✔ purrr     1.0.2     
#> ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
#> ✖ dplyr::filter() masks stats::filter()
#> ✖ dplyr::lag()    masks stats::lag()
#> ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors
library(here)
#> here() starts at \\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR

# Path to exported metadata folder / Chemin vers le dossier de métadonnées exportées
metadata <- import_metadata(here("example_data"))
#> Démarrage de l'importation des nomenclatures... Cela peut prendre quelques minutes.
#> Variable S1ASSO_DOM a été remplacée par les libellés de la catégorie.
#>    value
#> 1      1
#> 2      2
#> 3      3
#> 4      4
#> 5      5
#> 6      6
#> 7      7
#> 8      8
#> 9      9
#> 10    10
#>                                                                                 value_label
#> 1  Culture : préservation ou promotion du patrimoine, activités culturelles hors spectacles
#> 2                                                       Spectacles et activités artistiques
#> 3                                                     Loisirs, divertissements, vie sociale
#> 4                                                       Hébergement social ou médico-social
#> 5                                                                                     Santé
#> 6                                                                                     Sport
#> 7                                                  Défense de causes, de droits, d’intérêts
#> 8                                 Gestion de services économiques et de développement local
#> 9                         Action sociale, action humanitaire et caritative sans hébergement
#> 10                                                     Enseignement, formation et recherche
#>    parentvalue
#> 1           NA
#> 2           NA
#> 3           NA
#> 4           NA
#> 5           NA
#> 6           NA
#> 7           NA
#> 8           NA
#> 9           NA
#> 10          NA
#> Variable S1ASSO_SOUSDOM a été remplacée par les libellés de la catégorie.
#>    value
#> 1      1
#> 2      2
#> 3      3
#> 4      4
#> 5      1
#> 6      2
#> 7      3
#> 8      4
#> 9      1
#> 10     2
#> 11     3
#> 12     1
#> 13     2
#> 14     3
#> 15     4
#> 16     5
#> 17     6
#> 18     7
#> 19     8
#> 20     1
#> 21     2
#> 22     3
#> 23     4
#> 24     5
#> 25     6
#> 26     1
#> 27     2
#> 28     3
#> 29     4
#> 30     1
#> 31     2
#> 32     3
#> 33     4
#> 34     5
#> 35     6
#> 36     7
#> 37     8
#> 38     9
#> 39    10
#> 40    11
#> 41    12
#> 42     1
#> 43     2
#> 44     3
#> 45     4
#> 46     5
#> 47     6
#> 48     1
#> 49     2
#> 50     3
#> 51     4
#> 52     5
#> 53     6
#> 54     7
#> 55     8
#> 56     9
#> 57     1
#> 58     2
#> 59     3
#> 60     4
#> 61     5
#> 62     6
#> 63     7
#>                                                                                                                                                                                                                  value_label
#> 1                                                                                                                                                                                      Bibliothèques, médiathèques, archives
#> 2                                                                                                                                                                                                         Gestion des musées
#> 3                                                                                                                      Gestion des sites, monuments historiques et attractions touristiques similaires, sociétés historiques
#> 4                                                                                                                                                                          MJC, centres d’action culturelle, clubs culturels
#> 5                                                                                                          Création ou production de spectacles vivants (groupes ou artistes indépendants), festivals, radios et télévisions
#> 6                                                                                                                                 Prestation de soutien au spectacle vivant (son,éclairage,conseils,gestion administrative…)
#> 7                                                                                                                                             Création artistique (peinture,dessin,sculpture,écriture,composition musicale…)
#> 8                                                                                                                                                                                           Gestion des salles de spectacles
#> 9  Activités récréatives et de loisirs dont jeux organisés en fédérations (bridge,échecs… ), comités des fêtes, clubs 3ème âge, scouts, clubs (Kiwanis,Lyons…), collectionneurs, jumelage, activités de plein air ou voyages
#> 10                                                                                                                            Hébergement touristique social (dont maisons et colonies de vacances, centres aérés), cantines
#> 11                                                           Amicales ou groupement d’habitants, d’un quartier, d’une tribu, de personnes originaires d’une même région, d’un même pays, amicales de personnels d’entreprise
#> 12                                                                                                                                                                   Hébergement médicalisé pour personnes âgées, dont EHPAD
#> 13                                                                                                                                                                            Hébergement médicalisé pour enfants handicapés
#> 14                                                                                                                                            Hébergement médicalisé pour adultes handicapés et autre hébergement médicalisé
#> 15                                                                                                                                                                                Hébergement social pour handicapés mentaux
#> 16                                                                                                                                                                                   Hébergement social pour personnes âgées
#> 17                                                                                                                                                                              Hébergement social pour handicapés physiques
#> 18                                                                                                                                                                             Hébergement social pour enfants en difficulté
#> 19                                                                                                                                                    Autre hébergement social, dont pour adultes et familles en difficultés
#> 20                                                                                                                                                                                                   Activités hospitalières
#> 21                                                                                                                                                                            Dispensaires, médecine générale ou spécialisée
#> 22                                                                                                                                                                     Soins dispensés par des infirmiers et des sage-femmes
#> 23                                                                                                                                                                  Soins dispensés par des professionnels de la rééducation
#> 24                                                                                                                                                                Recherche médicale (lutte contre le cancer, la myopathie…)
#> 25                                                                                                                      Autres activités de santé, dont information et prévention, aides aux malades, groupements de malades
#> 26                                                                                                                                                                    Clubs de sports, enseignement de disciplines sportives
#> 27                                                                                                                                                                                         Gestion d’installations sportives
#> 28                                                                                                                                                                                                           Chasse et pêche
#> 29                                                                                                                                                                                           Autres activités liées au sport
#> 30                                                                                                                                                                   Organisations politiques, clubs et cercles de réflexion
#> 31                                                                                                                                                                                  Organisations culturelles et religieuses
#> 32                                                                                                                                                                                   Organisations patronales et consulaires
#> 33                                                                                                                                                                                            Organisations professionnelles
#> 34                                                                                                                                                                                                     Syndicats de salariés
#> 35                                                                                                                                                                 Associations d’élèves, d’étudiants ou de parents d’élèves
#> 36                                                                                                                                                                        Associations patriotiques ou d’anciens combattants
#> 37                                                                                                                         Protection de l’environnement, gestion des jardins et réserves naturelles, protection des animaux
#> 38                                                                                                                                                               Défense des consommateurs, des usagers des services publics
#> 39                                                                                                                                                                            Associations de locataires ou de propriétaires
#> 40                                                                                                                       Associations de défense des droits humains, des droits des femmes, de minorités, groupes d’entraide
#> 41                                                                                                                                                                        Autres défenses de droits, de causes et d’intérêts
#> 42                                                                                                                                                                            Développement économique local, GIP, GIE, GDPL
#> 43                                                                                                                     Offices de tourisme, syndicats d’initiative, comités de tourisme, agences dedéveloppement touristique
#> 44                                                                                  Groupement d’employeurs ayant des salariés pour le compte de tiers, sociétés d’économie mixte locale, coopérative d’activité et d’emploi
#> 45                                                               Gestion d’activités communes par la mise en commun de moyens, associations réalisant des activités support (y compris associations de moyens ou de gestion)
#> 46                                                                                                                                                            AMAP (Association pour le Maintien d’une Agriculture Paysanne)
#> 47                                                                                                                                                                        Sécurité, protection civile, sauvetage, secourisme
#> 48                                                                                                        Aide à l’emploi, activité d’insertion professionnelle, missions locales pour l’emploi, associations intermédiaires
#> 49                                                                                                                                     Accueil ou accompagnement sans hébergement d’adultes handicapés ou de personnes âgées
#> 50                                                                                                                                                                          Aide par le travail pour les salariés handicapés
#> 51                                                                                                                                                                                Accueil de jeunes enfants sans hébergement
#> 52                                                                                                                                                           Accueil ou accompagnement sans hébergement d’enfants handicapés
#> 53                                                                                                                                               Autre accueil ou accompagnement sans hébergement d’enfants et d’adolescents
#> 54                                                                                                                                                                                                          Aide au logement
#> 55                                                                                                                                                                                                           Aide à domicile
#> 56                                                                                                                            Associations caritatives, humanitaires (y compris aide internationale) et autre action sociale
#> 57                                                                                                                                                                                     Enseignement pré-primaire ou primaire
#> 58                                                                                                                                                               Enseignement secondaire général, technique ou professionnel
#> 59                                                                                                                                                                                                    Enseignement supérieur
#> 60                                                                                                                  Enseignement d’activités culturelles et de loisirs (y compris école de danse, musique, arts plastiques…)
#> 61                                                                                                                                                                                              Formation continue d’adultes
#> 62                                                                                                                                                                        Autres formes d’enseignement dont soutien scolaire
#> 63                                                                                                                                                                                       Recherche (hors recherche médicale)
#>    parentvalue
#> 1            1
#> 2            1
#> 3            1
#> 4            1
#> 5            2
#> 6            2
#> 7            2
#> 8            2
#> 9            3
#> 10           3
#> 11           3
#> 12           4
#> 13           4
#> 14           4
#> 15           4
#> 16           4
#> 17           4
#> 18           4
#> 19           4
#> 20           5
#> 21           5
#> 22           5
#> 23           5
#> 24           5
#> 25           5
#> 26           6
#> 27           6
#> 28           6
#> 29           6
#> 30           7
#> 31           7
#> 32           7
#> 33           7
#> 34           7
#> 35           7
#> 36           7
#> 37           7
#> 38           7
#> 39           7
#> 40           7
#> 41           7
#> 42           8
#> 43           8
#> 44           8
#> 45           8
#> 46           8
#> 47           8
#> 48           9
#> 49           9
#> 50           9
#> 51           9
#> 52           9
#> 53           9
#> 54           9
#> 55           9
#> 56           9
#> 57          10
#> 58          10
#> 59          10
#> 60          10
#> 61          10
#> 62          10
#> 63          10
#> Variable S1AD_COM a été remplacée par les libellés de la catégorie.
#>    value                       value_label parentvalue
#> 1      1                        01 - Bélep          NA
#> 2      2                  02 - Boulouparis          NA
#> 3      3                      03 - Bourail          NA
#> 4      4                       04 - Canala          NA
#> 5      5                       05 - Dumbéa          NA
#> 6      6                       06 - Farino          NA
#> 7      7                    07 - Hienghène          NA
#> 8      8                     08 - Houaïlou          NA
#> 9      9                 09 - Ile des pins          NA
#> 10    10                  10 - Kaala-gomen          NA
#> 11    11                         11 - Koné          NA
#> 12    12                       12 - Koumac          NA
#> 13    13                       13 - La Foa          NA
#> 14    14                        14 - Lifou          NA
#> 15    15                         15 - Maré          NA
#> 16    16                      16 - Moindou          NA
#> 17    17                    17 - Mont-Dore          NA
#> 18    18                       18 - Nouméa          NA
#> 19    19                       19 - Ouégoa          NA
#> 20    20                        20 - Ouvéa          NA
#> 21    21                        21 - Païta          NA
#> 22    22                    22 - Poindimié          NA
#> 23    23                  23 - Ponérihouen          NA
#> 24    24                       24 - Pouébo          NA
#> 25    25                    25 - Pouembout          NA
#> 26    26                         26 - Poum          NA
#> 27    27                         27 - Poya          NA
#> 28    28                     28 - Sarraméa          NA
#> 29    29                         29 - Thio          NA
#> 30    30                        30 - Touho          NA
#> 31    31                          31 - Voh          NA
#> 32    32                         32 - Yaté          NA
#> 33    33                      33 - Kouaoua          NA
#> 34    99                             Autre          NA
#> 35  9999 Ne sait pas ou refuse de répondre          NA
#> Variable S1CONT_FONCTION a été remplacée par les libellés de la catégorie.
#>   value             value_label parentvalue
#> 1     1            Président(e)          NA
#> 2     2       Vice-président(e)          NA
#> 3     3            Trésorier(e)          NA
#> 4     4 Trésorier(e) adjoint(e)          NA
#> 5     5              Secrétaire          NA
#> 6     6   Secrétaire adjoint(e)          NA
#> 7     7          Autre fonction          NA
head(metadata)
#>                                                                                                                       chemin
#> 1 \\\\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/assignment__actions.do
#> 2 \\\\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/assignment__actions.do
#> 3 \\\\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/assignment__actions.do
#> 4 \\\\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/assignment__actions.do
#> 5 \\\\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/assignment__actions.do
#> 6 \\\\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/assignment__actions.do
#>                  fichier variable_name       variable_label value
#> 1 assignment__actions.do        action Type of action taken     0
#> 2 assignment__actions.do        action Type of action taken     1
#> 3 assignment__actions.do        action Type of action taken     2
#> 4 assignment__actions.do        action Type of action taken     3
#> 5 assignment__actions.do        action Type of action taken     4
#> 6 assignment__actions.do        action Type of action taken     5
#>        value_label parentvalue
#> 1          Unknown          NA
#> 2          Created          NA
#> 3         Archived          NA
#> 4          Deleted          NA
#> 5 ReceivedByTablet          NA
#> 6       Unarchived          NA
```

### 2. Import Survey Results / Importer les Résultats de l’Enquête

Use `import_results` to import main survey results along with associated
files, by specifying the questionnaire variable name and files to
import.

Utilisez `import_results` pour importer les résultats de l’enquête, y
compris les rosters et les autres fichiers associés, en spécifiant le
nom de la variable de questionnaire et les fichiers à importer.

``` r
# Import results with rosters / Importer les résultats avec les rosters
results <- import_results("ESS_2024", Importer_Rosters = TRUE, Importer_AssignmentsValues = TRUE, dossier_resultats = here("example_data"))
#> Importation terminée.
#> Nombre de rosters importés : 6 
#> Fichiers importés avec succès :
#> -  \\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/ESS_2024.tab 
#> -  \\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/Roster_AvantApres.tab 
#> -  \\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/Roster_AvantApres_2.tab 
#> -  \\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/Roster_AvantApres1.tab 
#> -  \\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/Roster_leviers.tab 
#> -  \\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/S3_RosterDuree.tab 
#> -  \\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/S3_RosterImpacts.tab 
#> -  \\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/assignment__actions.tab 
#> Tous les fichiers ont été importés avec succès.
head(results)
#> NULL
```

### 3. Clean Unnecessary Columns / Nettoyer les Colonnes Indésirables

When list-type questions are configured without limits in the number of
answers, Survey Solutions may generate hundreds of columns containing
only missing values. Use `clean_lists` to remove these unnecessary
columns from the results and optionally from the metadata.

Lorsque des questions de type liste sont configurées sans limites de
nombre de réponses, Survey Solutions peut générer des centaines de
colonnes contenant uniquement des valeurs manquantes. Utilisez
`clean_lists` pour supprimer ces colonnes inutiles dans les résultats et
éventuellement dans la nomenclature.  

``` r
# Clean unnecessary columns in results / Nettoyer les colonnes indésirables du tableau de résultats
ESS_2024_clean <- ESS_2024 %>%
  clean_lists()

# Clean some roster data / Nettoyer les colonnes indésirables du tableau de résultats d'un des rosters : 
ESS_2024_Roster_AvantApres_clean <- ESS_2024_Roster_AvantApres %>%
  clean_lists()




# Clean the metadata based on removed columns / Nettoyer la nomenclature en fonction des colonnes supprimées

# WARNING : USE THE NON CLEANED VERSION OF THE DATASET (ESS_2024 and not ESS_2024_clean) OTHERWISE THIS WILL NOT WORK. 
# ATTENTION : UTILISEZ LA VERSION NON NETTOYEE DU JEU DE DONNEES (ESS_2024 ET NON PAS ESS_2024_clean) SINON CELA NE FONCTIONNERA PAS : 

nomenclature_clean <- metadata %>%
  clean_lists(data = list(ESS_2024, ESS_2024_Roster_AvantApres))
```

### 4. Replace Specific Missing Values / Remplacer les Valeurs Manquantes Spécifiques

Values like `-999999999` or `##N/A##` may indicate missing data. Use
`replace_na_values` to standardize these as `NA`.

Certaines valeurs comme `-999999999` ou `##N/A##` peuvent être utilisées
pour indiquer des données manquantes. Utilisez `replace_na_values` pour
standardiser ces valeurs manquantes en les remplaçant par `NA`.  

``` r
# Replace specific missing values with NA / Remplacer les valeurs manquantes spécifiques par NA
ESS_2024_NA_clean <- ESS_2024_clean %>%
  replace_na_values()
```

### 5. Replace Coded Values with Labels / Remplacer les Valeurs Codées par leurs Labels

To make the data more interpretable, replace coded values in the results
table with their associated labels from the metadata.

Pour faciliter l’interprétation, vous pouvez remplacer les valeurs
codées dans le tableau de résultats par les labels associés à partir de
la nomenclature.

``` r
# Replace coded values with labels / Remplacer les valeurs codées par leurs labels
ESS_2024_labeled <- ESS_2024_NA_clean %>%
  values_to_labels(nomenclature_clean, columns = "all")
#> Valeurs remplacées par labels pour les colonnes : interview__key, interview__id, S1ASSO_NOM, S1ASSO_RID, S1_CONFIRMATION_NOM, S1_NOUVEAU_NOM, S1ASSO_DOM, S1ASSO_SOUSDOM, S1AD, S1AD_COMP, S1AD_CP, S1AD_COM, S1CONT_NOM, S1CONT_PRENOM, S1CONT_FONCTION, S1ASSO_FONCTION_AUTRE, S1CONT_MAIL, S1CONT_TEL, VAR_Total_Avant, VAR_Total_Apres, Total_NonReponse, Infos_dispos, Demande_contact, Total_NonReponse_1, Infos_dispos_1, Demande_contact_1, Nb_benevoles_av, Nb_benevoles_ap, Profil_benef_av__0, Profil_benef_av__0c, Profil_benef_av__1, Profil_benef_av__1c, Profil_benef_av__2, Profil_benef_av__2c, Profil_benef_av__3, Profil_benef_av__3c, Nb_benef_av__0, Nb_benef_av__0c, Nb_benef_av__1, Nb_benef_av__1c, Nb_benef_av__2, Nb_benef_av__2c, Nb_benef_av__3, Nb_benef_av__3c, Nb_beneficiares_av, Nb_beneficiares_ap, Total_NonReponse_Roster2, Infos_dispos_2, Demande_contact_2, S3Q1_ASSOLIK, S3Q2_ASSOARRET1, S3Q2_ASSOARRET2__1, S3Q2_ASSOARRET2__2, S3Q3_IMPACT__1, S3Q3_IMPACT__2, S3Q3_IMPACT__3, S3Q3_IMPACT__4, S3Q3_IMPACT__5, S3Q3_IMPACT__6, S3Q3_IMPACT__7, S4Q1_FREINS__1, S4Q1_FREINS__2, S4Q1_FREINS__3, S4Q1_FREINS__4, S4Q1_FREINS__5, S4Q1_FREINS__6, S4Q1_FREINS__7, S4Q2_PrecisionFreins, S4Q3_DIFFIC, S5Q1_LEVIERS__1, S5Q1_LEVIERS__2, S5Q1_LEVIERS__3, S5Q1_LEVIERS__4, S5Q1_LEVIERS__5, S5Q1_LEVIERS__6, S5Q1_LEVIERS__7, S5Q1_LEVIERS__8, S5Q1_LEVIERS__9, S5Q1_LEVIERS__10, S5Q1_LEVIERS__11, S5Q2_SOUTFINCOMPL__1, S5Q2_SOUTFINCOMPL__2, S5Q2_SOUTFINCOMPL__3, S5Q2_SOUTFINCOMPL__4, S5Q2_SOUTFINCOMPL__5, S5Q2_SOUTFINCOMPL__6, S5Q2_AUCUNRAISONS, S5Q2bis_PrecisionSoutien, S6Q1_RESSENTILIK, S6Q2_RETOURAVCRISE, S6Q3_BESOINSPRIO__0, S6Q3_BESOINSPRIO__0c, S6Q3_BESOINSPRIO__1, S6Q3_BESOINSPRIO__1c, S6Q3_BESOINSPRIO__2, S6Q3_BESOINSPRIO__2c, S6Q5_CSQFINASSO, S6Q4_EXPSUPPL, sssys_irnd, has__errors, interview__status, assignment__id
```

## Full Example / Exemple Complet

Here’s a full example workflow with **SuSoTidyR**:

Voici un exemple complet de flux de travail avec **SuSoTidyR** :

``` r
library(SuSoTidyR)
library(tidyverse)
library(here)

# Path to exported metadata folder / Chemin vers le dossier de métadonnées exportées
metadata <- import_metadata(here("example_data"))
#> Démarrage de l'importation des nomenclatures... Cela peut prendre quelques minutes.
#> Variable S1ASSO_DOM a été remplacée par les libellés de la catégorie.
#>    value
#> 1      1
#> 2      2
#> 3      3
#> 4      4
#> 5      5
#> 6      6
#> 7      7
#> 8      8
#> 9      9
#> 10    10
#>                                                                                 value_label
#> 1  Culture : préservation ou promotion du patrimoine, activités culturelles hors spectacles
#> 2                                                       Spectacles et activités artistiques
#> 3                                                     Loisirs, divertissements, vie sociale
#> 4                                                       Hébergement social ou médico-social
#> 5                                                                                     Santé
#> 6                                                                                     Sport
#> 7                                                  Défense de causes, de droits, d’intérêts
#> 8                                 Gestion de services économiques et de développement local
#> 9                         Action sociale, action humanitaire et caritative sans hébergement
#> 10                                                     Enseignement, formation et recherche
#>    parentvalue
#> 1           NA
#> 2           NA
#> 3           NA
#> 4           NA
#> 5           NA
#> 6           NA
#> 7           NA
#> 8           NA
#> 9           NA
#> 10          NA
#> Variable S1ASSO_SOUSDOM a été remplacée par les libellés de la catégorie.
#>    value
#> 1      1
#> 2      2
#> 3      3
#> 4      4
#> 5      1
#> 6      2
#> 7      3
#> 8      4
#> 9      1
#> 10     2
#> 11     3
#> 12     1
#> 13     2
#> 14     3
#> 15     4
#> 16     5
#> 17     6
#> 18     7
#> 19     8
#> 20     1
#> 21     2
#> 22     3
#> 23     4
#> 24     5
#> 25     6
#> 26     1
#> 27     2
#> 28     3
#> 29     4
#> 30     1
#> 31     2
#> 32     3
#> 33     4
#> 34     5
#> 35     6
#> 36     7
#> 37     8
#> 38     9
#> 39    10
#> 40    11
#> 41    12
#> 42     1
#> 43     2
#> 44     3
#> 45     4
#> 46     5
#> 47     6
#> 48     1
#> 49     2
#> 50     3
#> 51     4
#> 52     5
#> 53     6
#> 54     7
#> 55     8
#> 56     9
#> 57     1
#> 58     2
#> 59     3
#> 60     4
#> 61     5
#> 62     6
#> 63     7
#>                                                                                                                                                                                                                  value_label
#> 1                                                                                                                                                                                      Bibliothèques, médiathèques, archives
#> 2                                                                                                                                                                                                         Gestion des musées
#> 3                                                                                                                      Gestion des sites, monuments historiques et attractions touristiques similaires, sociétés historiques
#> 4                                                                                                                                                                          MJC, centres d’action culturelle, clubs culturels
#> 5                                                                                                          Création ou production de spectacles vivants (groupes ou artistes indépendants), festivals, radios et télévisions
#> 6                                                                                                                                 Prestation de soutien au spectacle vivant (son,éclairage,conseils,gestion administrative…)
#> 7                                                                                                                                             Création artistique (peinture,dessin,sculpture,écriture,composition musicale…)
#> 8                                                                                                                                                                                           Gestion des salles de spectacles
#> 9  Activités récréatives et de loisirs dont jeux organisés en fédérations (bridge,échecs… ), comités des fêtes, clubs 3ème âge, scouts, clubs (Kiwanis,Lyons…), collectionneurs, jumelage, activités de plein air ou voyages
#> 10                                                                                                                            Hébergement touristique social (dont maisons et colonies de vacances, centres aérés), cantines
#> 11                                                           Amicales ou groupement d’habitants, d’un quartier, d’une tribu, de personnes originaires d’une même région, d’un même pays, amicales de personnels d’entreprise
#> 12                                                                                                                                                                   Hébergement médicalisé pour personnes âgées, dont EHPAD
#> 13                                                                                                                                                                            Hébergement médicalisé pour enfants handicapés
#> 14                                                                                                                                            Hébergement médicalisé pour adultes handicapés et autre hébergement médicalisé
#> 15                                                                                                                                                                                Hébergement social pour handicapés mentaux
#> 16                                                                                                                                                                                   Hébergement social pour personnes âgées
#> 17                                                                                                                                                                              Hébergement social pour handicapés physiques
#> 18                                                                                                                                                                             Hébergement social pour enfants en difficulté
#> 19                                                                                                                                                    Autre hébergement social, dont pour adultes et familles en difficultés
#> 20                                                                                                                                                                                                   Activités hospitalières
#> 21                                                                                                                                                                            Dispensaires, médecine générale ou spécialisée
#> 22                                                                                                                                                                     Soins dispensés par des infirmiers et des sage-femmes
#> 23                                                                                                                                                                  Soins dispensés par des professionnels de la rééducation
#> 24                                                                                                                                                                Recherche médicale (lutte contre le cancer, la myopathie…)
#> 25                                                                                                                      Autres activités de santé, dont information et prévention, aides aux malades, groupements de malades
#> 26                                                                                                                                                                    Clubs de sports, enseignement de disciplines sportives
#> 27                                                                                                                                                                                         Gestion d’installations sportives
#> 28                                                                                                                                                                                                           Chasse et pêche
#> 29                                                                                                                                                                                           Autres activités liées au sport
#> 30                                                                                                                                                                   Organisations politiques, clubs et cercles de réflexion
#> 31                                                                                                                                                                                  Organisations culturelles et religieuses
#> 32                                                                                                                                                                                   Organisations patronales et consulaires
#> 33                                                                                                                                                                                            Organisations professionnelles
#> 34                                                                                                                                                                                                     Syndicats de salariés
#> 35                                                                                                                                                                 Associations d’élèves, d’étudiants ou de parents d’élèves
#> 36                                                                                                                                                                        Associations patriotiques ou d’anciens combattants
#> 37                                                                                                                         Protection de l’environnement, gestion des jardins et réserves naturelles, protection des animaux
#> 38                                                                                                                                                               Défense des consommateurs, des usagers des services publics
#> 39                                                                                                                                                                            Associations de locataires ou de propriétaires
#> 40                                                                                                                       Associations de défense des droits humains, des droits des femmes, de minorités, groupes d’entraide
#> 41                                                                                                                                                                        Autres défenses de droits, de causes et d’intérêts
#> 42                                                                                                                                                                            Développement économique local, GIP, GIE, GDPL
#> 43                                                                                                                     Offices de tourisme, syndicats d’initiative, comités de tourisme, agences dedéveloppement touristique
#> 44                                                                                  Groupement d’employeurs ayant des salariés pour le compte de tiers, sociétés d’économie mixte locale, coopérative d’activité et d’emploi
#> 45                                                               Gestion d’activités communes par la mise en commun de moyens, associations réalisant des activités support (y compris associations de moyens ou de gestion)
#> 46                                                                                                                                                            AMAP (Association pour le Maintien d’une Agriculture Paysanne)
#> 47                                                                                                                                                                        Sécurité, protection civile, sauvetage, secourisme
#> 48                                                                                                        Aide à l’emploi, activité d’insertion professionnelle, missions locales pour l’emploi, associations intermédiaires
#> 49                                                                                                                                     Accueil ou accompagnement sans hébergement d’adultes handicapés ou de personnes âgées
#> 50                                                                                                                                                                          Aide par le travail pour les salariés handicapés
#> 51                                                                                                                                                                                Accueil de jeunes enfants sans hébergement
#> 52                                                                                                                                                           Accueil ou accompagnement sans hébergement d’enfants handicapés
#> 53                                                                                                                                               Autre accueil ou accompagnement sans hébergement d’enfants et d’adolescents
#> 54                                                                                                                                                                                                          Aide au logement
#> 55                                                                                                                                                                                                           Aide à domicile
#> 56                                                                                                                            Associations caritatives, humanitaires (y compris aide internationale) et autre action sociale
#> 57                                                                                                                                                                                     Enseignement pré-primaire ou primaire
#> 58                                                                                                                                                               Enseignement secondaire général, technique ou professionnel
#> 59                                                                                                                                                                                                    Enseignement supérieur
#> 60                                                                                                                  Enseignement d’activités culturelles et de loisirs (y compris école de danse, musique, arts plastiques…)
#> 61                                                                                                                                                                                              Formation continue d’adultes
#> 62                                                                                                                                                                        Autres formes d’enseignement dont soutien scolaire
#> 63                                                                                                                                                                                       Recherche (hors recherche médicale)
#>    parentvalue
#> 1            1
#> 2            1
#> 3            1
#> 4            1
#> 5            2
#> 6            2
#> 7            2
#> 8            2
#> 9            3
#> 10           3
#> 11           3
#> 12           4
#> 13           4
#> 14           4
#> 15           4
#> 16           4
#> 17           4
#> 18           4
#> 19           4
#> 20           5
#> 21           5
#> 22           5
#> 23           5
#> 24           5
#> 25           5
#> 26           6
#> 27           6
#> 28           6
#> 29           6
#> 30           7
#> 31           7
#> 32           7
#> 33           7
#> 34           7
#> 35           7
#> 36           7
#> 37           7
#> 38           7
#> 39           7
#> 40           7
#> 41           7
#> 42           8
#> 43           8
#> 44           8
#> 45           8
#> 46           8
#> 47           8
#> 48           9
#> 49           9
#> 50           9
#> 51           9
#> 52           9
#> 53           9
#> 54           9
#> 55           9
#> 56           9
#> 57          10
#> 58          10
#> 59          10
#> 60          10
#> 61          10
#> 62          10
#> 63          10
#> Variable S1AD_COM a été remplacée par les libellés de la catégorie.
#>    value                       value_label parentvalue
#> 1      1                        01 - Bélep          NA
#> 2      2                  02 - Boulouparis          NA
#> 3      3                      03 - Bourail          NA
#> 4      4                       04 - Canala          NA
#> 5      5                       05 - Dumbéa          NA
#> 6      6                       06 - Farino          NA
#> 7      7                    07 - Hienghène          NA
#> 8      8                     08 - Houaïlou          NA
#> 9      9                 09 - Ile des pins          NA
#> 10    10                  10 - Kaala-gomen          NA
#> 11    11                         11 - Koné          NA
#> 12    12                       12 - Koumac          NA
#> 13    13                       13 - La Foa          NA
#> 14    14                        14 - Lifou          NA
#> 15    15                         15 - Maré          NA
#> 16    16                      16 - Moindou          NA
#> 17    17                    17 - Mont-Dore          NA
#> 18    18                       18 - Nouméa          NA
#> 19    19                       19 - Ouégoa          NA
#> 20    20                        20 - Ouvéa          NA
#> 21    21                        21 - Païta          NA
#> 22    22                    22 - Poindimié          NA
#> 23    23                  23 - Ponérihouen          NA
#> 24    24                       24 - Pouébo          NA
#> 25    25                    25 - Pouembout          NA
#> 26    26                         26 - Poum          NA
#> 27    27                         27 - Poya          NA
#> 28    28                     28 - Sarraméa          NA
#> 29    29                         29 - Thio          NA
#> 30    30                        30 - Touho          NA
#> 31    31                          31 - Voh          NA
#> 32    32                         32 - Yaté          NA
#> 33    33                      33 - Kouaoua          NA
#> 34    99                             Autre          NA
#> 35  9999 Ne sait pas ou refuse de répondre          NA
#> Variable S1CONT_FONCTION a été remplacée par les libellés de la catégorie.
#>   value             value_label parentvalue
#> 1     1            Président(e)          NA
#> 2     2       Vice-président(e)          NA
#> 3     3            Trésorier(e)          NA
#> 4     4 Trésorier(e) adjoint(e)          NA
#> 5     5              Secrétaire          NA
#> 6     6   Secrétaire adjoint(e)          NA
#> 7     7          Autre fonction          NA

# Import results with rosters / Importer les résultats avec les rosters
results <- import_results("ESS_2024", Importer_Rosters = TRUE, Importer_AssignmentsValues = TRUE, dossier_resultats = here("example_data"))
#> Importation terminée.
#> Nombre de rosters importés : 6 
#> Fichiers importés avec succès :
#> -  \\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/ESS_2024.tab 
#> -  \\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/Roster_AvantApres.tab 
#> -  \\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/Roster_AvantApres_2.tab 
#> -  \\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/Roster_AvantApres1.tab 
#> -  \\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/Roster_leviers.tab 
#> -  \\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/S3_RosterDuree.tab 
#> -  \\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/S3_RosterImpacts.tab 
#> -  \\isee.local/public/utilisateurs/USER/Noe.Barthelemy/Noe_Barthelemy_ISEE/R/SuSoTidyR/example_data/assignment__actions.tab 
#> Tous les fichiers ont été importés avec succès.

# Clean unnecessary columns in results / Nettoyer les colonnes indésirables du tableau de résultats
ESS_2024_clean <- ESS_2024 %>%
  clean_lists()

# Clean some roster data / Nettoyer les colonnes indésirables du tableau de résultats d'un des rosters : 
ESS_2024_Roster_AvantApres_clean <- ESS_2024_Roster_AvantApres %>%
  clean_lists()

# Clean the metadata based on removed columns / Nettoyer la nomenclature en fonction des colonnes supprimées

# WARNING : USE THE NON CLEANED VERSION OF THE DATASET (ESS_2024 and not ESS_2024_clean) OTHERWISE THIS WILL NOT WORK. 
# ATTENTION : UTILISEZ LA VERSION NON NETTOYEE DU JEU DE DONNEES (ESS_2024 ET NON PAS ESS_2024_clean) SINON CELA NE FONCTIONNERA PAS : 

nomenclature_clean <- metadata %>%
  clean_lists(data = list(ESS_2024, ESS_2024_Roster_AvantApres))

# Replace specific missing values with NA / Remplacer les valeurs manquantes spécifiques par NA
ESS_2024_NA_clean <- ESS_2024_clean %>%
  replace_na_values()

# Replace coded values with labels / Remplacer les valeurs codées par leurs labels
ESS_2024_labeled <- ESS_2024_NA_clean %>%
  values_to_labels(nomenclature_clean, columns = "all")
#> Valeurs remplacées par labels pour les colonnes : interview__key, interview__id, S1ASSO_NOM, S1ASSO_RID, S1_CONFIRMATION_NOM, S1_NOUVEAU_NOM, S1ASSO_DOM, S1ASSO_SOUSDOM, S1AD, S1AD_COMP, S1AD_CP, S1AD_COM, S1CONT_NOM, S1CONT_PRENOM, S1CONT_FONCTION, S1ASSO_FONCTION_AUTRE, S1CONT_MAIL, S1CONT_TEL, VAR_Total_Avant, VAR_Total_Apres, Total_NonReponse, Infos_dispos, Demande_contact, Total_NonReponse_1, Infos_dispos_1, Demande_contact_1, Nb_benevoles_av, Nb_benevoles_ap, Profil_benef_av__0, Profil_benef_av__0c, Profil_benef_av__1, Profil_benef_av__1c, Profil_benef_av__2, Profil_benef_av__2c, Profil_benef_av__3, Profil_benef_av__3c, Nb_benef_av__0, Nb_benef_av__0c, Nb_benef_av__1, Nb_benef_av__1c, Nb_benef_av__2, Nb_benef_av__2c, Nb_benef_av__3, Nb_benef_av__3c, Nb_beneficiares_av, Nb_beneficiares_ap, Total_NonReponse_Roster2, Infos_dispos_2, Demande_contact_2, S3Q1_ASSOLIK, S3Q2_ASSOARRET1, S3Q2_ASSOARRET2__1, S3Q2_ASSOARRET2__2, S3Q3_IMPACT__1, S3Q3_IMPACT__2, S3Q3_IMPACT__3, S3Q3_IMPACT__4, S3Q3_IMPACT__5, S3Q3_IMPACT__6, S3Q3_IMPACT__7, S4Q1_FREINS__1, S4Q1_FREINS__2, S4Q1_FREINS__3, S4Q1_FREINS__4, S4Q1_FREINS__5, S4Q1_FREINS__6, S4Q1_FREINS__7, S4Q2_PrecisionFreins, S4Q3_DIFFIC, S5Q1_LEVIERS__1, S5Q1_LEVIERS__2, S5Q1_LEVIERS__3, S5Q1_LEVIERS__4, S5Q1_LEVIERS__5, S5Q1_LEVIERS__6, S5Q1_LEVIERS__7, S5Q1_LEVIERS__8, S5Q1_LEVIERS__9, S5Q1_LEVIERS__10, S5Q1_LEVIERS__11, S5Q2_SOUTFINCOMPL__1, S5Q2_SOUTFINCOMPL__2, S5Q2_SOUTFINCOMPL__3, S5Q2_SOUTFINCOMPL__4, S5Q2_SOUTFINCOMPL__5, S5Q2_SOUTFINCOMPL__6, S5Q2_AUCUNRAISONS, S5Q2bis_PrecisionSoutien, S6Q1_RESSENTILIK, S6Q2_RETOURAVCRISE, S6Q3_BESOINSPRIO__0, S6Q3_BESOINSPRIO__0c, S6Q3_BESOINSPRIO__1, S6Q3_BESOINSPRIO__1c, S6Q3_BESOINSPRIO__2, S6Q3_BESOINSPRIO__2c, S6Q5_CSQFINASSO, S6Q4_EXPSUPPL, sssys_irnd, has__errors, interview__status, assignment__id
```

## Contributions

Contributions are welcome! If you have suggestions, ideas for
improvement, or if you encounter any issues, feel free to create an
issue or submit a pull request on GitHub.

Les contributions sont les bienvenues ! Si vous avez des suggestions,
des idées d’amélioration ou si vous rencontrez des problèmes, n’hésitez
pas à créer une issue ou à soumettre une pull request sur GitHub.
